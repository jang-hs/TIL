<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kubernetes NetworkPolicy | Today I Learned</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="desc">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.00bd70e4.css" as="style"><link rel="preload" href="/TIL/assets/js/app.dba3423c.js" as="script"><link rel="preload" href="/TIL/assets/js/2.83a6f128.js" as="script"><link rel="preload" href="/TIL/assets/js/1.322c5a0a.js" as="script"><link rel="preload" href="/TIL/assets/js/40.c4adbd8b.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.d9e4b84a.js"><link rel="prefetch" href="/TIL/assets/js/11.ccf2f442.js"><link rel="prefetch" href="/TIL/assets/js/12.7e65a11a.js"><link rel="prefetch" href="/TIL/assets/js/13.d4317b93.js"><link rel="prefetch" href="/TIL/assets/js/14.ea01d868.js"><link rel="prefetch" href="/TIL/assets/js/15.9da1bcf8.js"><link rel="prefetch" href="/TIL/assets/js/16.8727279f.js"><link rel="prefetch" href="/TIL/assets/js/17.fa7fb6b0.js"><link rel="prefetch" href="/TIL/assets/js/18.56419c05.js"><link rel="prefetch" href="/TIL/assets/js/19.42d46c09.js"><link rel="prefetch" href="/TIL/assets/js/20.100d0125.js"><link rel="prefetch" href="/TIL/assets/js/21.428690a9.js"><link rel="prefetch" href="/TIL/assets/js/22.53eda83e.js"><link rel="prefetch" href="/TIL/assets/js/23.377a507c.js"><link rel="prefetch" href="/TIL/assets/js/24.62a43f53.js"><link rel="prefetch" href="/TIL/assets/js/25.2cb61fbc.js"><link rel="prefetch" href="/TIL/assets/js/26.07decc26.js"><link rel="prefetch" href="/TIL/assets/js/27.51b2d4dd.js"><link rel="prefetch" href="/TIL/assets/js/28.86b66102.js"><link rel="prefetch" href="/TIL/assets/js/29.f2c2a0c0.js"><link rel="prefetch" href="/TIL/assets/js/3.e6df855e.js"><link rel="prefetch" href="/TIL/assets/js/30.33147ece.js"><link rel="prefetch" href="/TIL/assets/js/31.4cd27359.js"><link rel="prefetch" href="/TIL/assets/js/32.a6842c91.js"><link rel="prefetch" href="/TIL/assets/js/33.431c1871.js"><link rel="prefetch" href="/TIL/assets/js/34.53302144.js"><link rel="prefetch" href="/TIL/assets/js/35.d500be46.js"><link rel="prefetch" href="/TIL/assets/js/36.f4e6eb9f.js"><link rel="prefetch" href="/TIL/assets/js/37.eb0597c0.js"><link rel="prefetch" href="/TIL/assets/js/38.bcaf4fbf.js"><link rel="prefetch" href="/TIL/assets/js/39.c64a3043.js"><link rel="prefetch" href="/TIL/assets/js/4.cd02f05a.js"><link rel="prefetch" href="/TIL/assets/js/41.417973c2.js"><link rel="prefetch" href="/TIL/assets/js/42.c0d1a1f0.js"><link rel="prefetch" href="/TIL/assets/js/5.610977c8.js"><link rel="prefetch" href="/TIL/assets/js/6.b548e5bb.js"><link rel="prefetch" href="/TIL/assets/js/7.08600db3.js"><link rel="prefetch" href="/TIL/assets/js/vendors~docsearch.ef62c33d.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.00bd70e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jang-hs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/jang-hs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/TIL/" aria-current="page" class="sidebar-link">Monthly I Learned</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>algorithm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>data-engineer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>design-pattern</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>mlops</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/mlops/241109-mlops-data-testing.html" class="sidebar-link">MLOps 01: Data testing, why, what and how</a></li><li><a href="/TIL/mlops/241110-mlops-dagstar.html" class="sidebar-link">MLOps 02: Dagster — Seamless Data Pipelines &amp; ML Model Management for Machine Learning Engineers</a></li><li><a href="/TIL/mlops/241111-mlops-featurestore.html" class="sidebar-link">MLOps 03: Feast Feature Store — An In-depth Overview Experimentation and Application in Tabular data</a></li><li><a href="/TIL/mlops/241120-devops-metric-monitoring-alert.html" class="sidebar-link">Metrics Monitoring and Alerting system</a></li><li><a href="/TIL/mlops/241124-docker-multistage.html" class="sidebar-link">도커 멀티스테이징</a></li><li><a href="/TIL/mlops/241125-devops-k8s-probe.html" class="sidebar-link">Kubernetes의 Probe 알아보기</a></li><li><a href="/TIL/mlops/241127-devops-k8s-hpa.html" class="sidebar-link">Kubernetes HPA (Horizontal Pod Autoscaler) 알아보기</a></li><li><a href="/TIL/mlops/250414-k8s-hard-way-01.html" class="sidebar-link">[k8s hard way] 01-prerequisites 실습</a></li><li><a href="/TIL/mlops/250415-k8s-hard-way-02.html" class="sidebar-link">[k8s hard way] 02-Jumpbox 설정</a></li><li><a href="/TIL/mlops/250725-gateway-httproute.html" class="sidebar-link">Gateway API와 HTTPRoute</a></li><li><a href="/TIL/mlops/250727-network-policy.html" aria-current="page" class="active sidebar-link">Kubernetes NetworkPolicy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_1-networkpolicy란-무엇인가" class="sidebar-link">1. NetworkPolicy란 무엇인가?</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_2-ingress와-egress의-개념과-차이점" class="sidebar-link">2. Ingress와 Egress의 개념과 차이점</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_3-동작-메커니즘과-cni-플러그인" class="sidebar-link">3. 동작 메커니즘과 CNI 플러그인</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_4-networkpolicy-주요-구성-요소" class="sidebar-link">4. NetworkPolicy 주요 구성 요소</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_5-고급-예시" class="sidebar-link">5. 고급 예시</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_6-실무-설계-전략" class="sidebar-link">6. 실무 설계 전략</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_7-성능-및-운영-고려사항" class="sidebar-link">7. 성능 및 운영 고려사항</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/250727-network-policy.html#_8-마무리" class="sidebar-link">8. 마무리</a></li></ul></li><li><a href="/TIL/mlops/250727-quota-limits.html" class="sidebar-link">LimitRange와 ResourceQuota</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>sql</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="kubernetes-networkpolicy"><a href="#kubernetes-networkpolicy" class="header-anchor">#</a> Kubernetes NetworkPolicy</h1> <p>쿠버네티스 클러스터는 기본적으로 Pod 간 통신에 어떠한 제한도 두지 않는 “모든 허용(all-allow)” 상태로 동작합니다. 이는 운영 환경에서 보안상 위험을 초래할 수 있으며, 서비스 간 불필요한 접근이나 내부 트래픽 유출의 가능성을 높입니다. 이러한 문제를 해결하기 위해 등장한 것이 NetworkPolicy입니다. NetworkPolicy는 Pod 레벨의 네트워크 방화벽 규칙을 정의하여 제로 트러스트(Zero Trust) 네트워크를 구현하는 핵심 도구입니다.</p> <p>이 글에서는 NetworkPolicy의 핵심 개념과 Ingress(수신 트래픽), Egress(송신 트래픽) 동작 원리를 심층적으로 분석하고, 실무에서 활용할 수 있는 고급 패턴 및 보안 전략을 다룹니다.</p> <h2 id="_1-networkpolicy란-무엇인가"><a href="#_1-networkpolicy란-무엇인가" class="header-anchor">#</a> 1. NetworkPolicy란 무엇인가?</h2> <p>NetworkPolicy는 Kubernetes에서 제공하는 L3/L4 계층 기반의 네트워크 접근 제어 정책입니다. 간단히 말해, 특정 Pod가 어떤 Pod, 네임스페이스, 또는 외부 네트워크와 통신할 수 있는지를 명시적으로 허용(Whitelist)하는 방식으로 동작합니다.</p> <ul><li>네임스페이스 범위: 정책은 특정 네임스페이스 내에서만 유효하며, <code>podSelector</code>를 통해 적용할 Pod를 지정합니다.</li> <li>화이트리스트 모델: 정책이 없는 경우 모든 트래픽이 허용되지만, 하나라도 정책이 적용되면 지정된 규칙에 맞는 트래픽만 통신이 가능합니다.</li> <li>포트 및 프로토콜 기반 제어: TCP, UDP, SCTP 등 프로토콜과 특정 포트 기반의 세밀한 접근 제어가 가능합니다.</li></ul> <h2 id="_2-ingress와-egress의-개념과-차이점"><a href="#_2-ingress와-egress의-개념과-차이점" class="header-anchor">#</a> 2. Ingress와 Egress의 개념과 차이점</h2> <h3 id="_2-1-ingress-수신-트래픽-제어"><a href="#_2-1-ingress-수신-트래픽-제어" class="header-anchor">#</a> 2-1. Ingress (수신 트래픽 제어)</h3> <p>Ingress 정책은 Pod으로 들어오는 트래픽을 제한합니다.
예를 들어, <code>role=backend</code> Pod가 <code>role=frontend</code> Pod로부터 오는 요청만 수락하도록 할 수 있습니다. Ingress 규칙이 적용되면 지정된 소스 외의 모든 접근은 기본적으로 거부됩니다.</p> <h3 id="_2-2-egress-송신-트래픽-제어"><a href="#_2-2-egress-송신-트래픽-제어" class="header-anchor">#</a> 2-2. Egress (송신 트래픽 제어)</h3> <p>Egress 정책은 Pod에서 나가는 트래픽을 제어합니다.
예를 들어, <code>role=frontend</code> Pod가 외부 인터넷 또는 특정 CIDR 대역으로만 통신할 수 있도록 제한할 수 있습니다. 보안상 중요한 DB나 외부 API에 대한 접근을 최소화할 때 유용합니다.</p> <h2 id="_3-동작-메커니즘과-cni-플러그인"><a href="#_3-동작-메커니즘과-cni-플러그인" class="header-anchor">#</a> 3. 동작 메커니즘과 CNI 플러그인</h2> <p>NetworkPolicy 자체는 추상화된 정책 정의 리소스일 뿐, 실제로 이를 적용하는 것은 CNI(Container Network Interface) 플러그인입니다.</p> <ul><li>지원 CNI: Calico, Cilium, Weave Net, Kube-router 등.</li> <li>비지원 CNI: 기본 Flannel(추가 설정이 없으면 정책 적용 불가).</li></ul> <p>CNI는 NetworkPolicy 정의를 기반으로 iptables 또는 eBPF 규칙을 생성하여 Pod 간 트래픽을 차단하거나 허용합니다. 특히 Cilium은 eBPF를 활용하여 성능 오버헤드를 줄이고, L7 레벨 정책까지 확장할 수 있는 장점이 있습니다.</p> <h2 id="_4-networkpolicy-주요-구성-요소"><a href="#_4-networkpolicy-주요-구성-요소" class="header-anchor">#</a> 4. NetworkPolicy 주요 구성 요소</h2> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>policy
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> app
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">podSelector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">role</span><span class="token punctuation">:</span> backend
  <span class="token key atrule">policyTypes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Ingress
  <span class="token punctuation">-</span> Egress
  <span class="token key atrule">ingress</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">from</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">podSelector</span><span class="token punctuation">:</span>
        <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
          <span class="token key atrule">role</span><span class="token punctuation">:</span> frontend
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token key atrule">egress</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">to</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">ipBlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">cidr</span><span class="token punctuation">:</span> 10.0.0.0/24
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>
</code></pre></div><ul><li>podSelector: 정책이 적용될 Pod를 선택.</li> <li>policyTypes: Ingress, Egress 중 어떤 트래픽을 제어할지 명시.</li> <li>ingress/from: 수신 트래픽 허용 규칙.</li> <li>egress/to: 송신 트래픽 허용 규칙.</li> <li>ports: 허용할 포트 및 프로토콜 정의.</li></ul> <h2 id="_5-고급-예시"><a href="#_5-고급-예시" class="header-anchor">#</a> 5. 고급 예시</h2> <h3 id="_5-1-ingress-예시"><a href="#_5-1-ingress-예시" class="header-anchor">#</a> 5-1. Ingress 예시</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> allow<span class="token punctuation">-</span>frontend
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> app
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">podSelector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">role</span><span class="token punctuation">:</span> backend
  <span class="token key atrule">policyTypes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Ingress
  <span class="token key atrule">ingress</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">from</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">podSelector</span><span class="token punctuation">:</span>
        <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
          <span class="token key atrule">role</span><span class="token punctuation">:</span> frontend
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre></div><p>결과: backend Pod는 frontend Pod의 80포트 접근만 허용.</p> <h3 id="_5-2-egress-예시"><a href="#_5-2-egress-예시" class="header-anchor">#</a> 5-2. Egress 예시</h3> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> restrict<span class="token punctuation">-</span>egress
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> app
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">podSelector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">role</span><span class="token punctuation">:</span> frontend
  <span class="token key atrule">policyTypes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Egress
  <span class="token key atrule">egress</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">to</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">ipBlock</span><span class="token punctuation">:</span>
        <span class="token key atrule">cidr</span><span class="token punctuation">:</span> 10.0.0.0/24
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">443</span>
</code></pre></div><p>결과: frontend Pod는 10.0.0.0/24 네트워크의 HTTPS(443)만 통신 허용.</p> <h3 id="_5-3-default-deny-기본-차단"><a href="#_5-3-default-deny-기본-차단" class="header-anchor">#</a> 5-3. Default Deny (기본 차단)</h3> <p>모든 트래픽을 차단하고 필요한 규칙만 허용하기 위해 아래와 같이 기본 차단 정책을 먼저 설정할 수 있습니다.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NetworkPolicy
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> default<span class="token punctuation">-</span>deny
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> app
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">podSelector</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">policyTypes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Ingress
  <span class="token punctuation">-</span> Egress
</code></pre></div><h2 id="_6-실무-설계-전략"><a href="#_6-실무-설계-전략" class="header-anchor">#</a> 6. 실무 설계 전략</h2> <h3 id="_6-1-zero-trust-아키텍처"><a href="#_6-1-zero-trust-아키텍처" class="header-anchor">#</a> 6-1. Zero Trust 아키텍처</h3> <p>NetworkPolicy는 모든 트래픽을 기본 차단하고 필요한 통신만 허용하는 제로 트러스트 방식과 잘 맞습니다. 서비스 간 접근 경로를 최소화하고, Pod 간 권한을 명확히 구분할 수 있습니다.</p> <h3 id="_6-2-dns-및-외부-접근-제어"><a href="#_6-2-dns-및-외부-접근-제어" class="header-anchor">#</a> 6-2. DNS 및 외부 접근 제어</h3> <p>Egress 정책을 사용할 때는 DNS(<code>port 53</code>) 트래픽이 차단될 수 있으므로, 필요한 DNS 서버로의 트래픽을 허용해야 합니다. 예:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">egress</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">to</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">ipBlock</span><span class="token punctuation">:</span>
      <span class="token key atrule">cidr</span><span class="token punctuation">:</span> 10.96.0.10/32   <span class="token comment"># CoreDNS IP</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> UDP
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">53</span>
</code></pre></div><h3 id="_6-3-observability와-정책-검증"><a href="#_6-3-observability와-정책-검증" class="header-anchor">#</a> 6-3. Observability와 정책 검증</h3> <ul><li>Cilium Hubble이나 Kiali를 사용하면 Pod 간 트래픽 흐름을 시각화하고, 정책 적용으로 인해 차단된 요청을 쉽게 파악할 수 있습니다.</li> <li>정책 테스트 시 <code>kubectl exec</code> 또는 <code>netcat</code>을 사용해 접근 허용 여부를 점검.</li></ul> <h2 id="_7-성능-및-운영-고려사항"><a href="#_7-성능-및-운영-고려사항" class="header-anchor">#</a> 7. 성능 및 운영 고려사항</h2> <ul><li>NetworkPolicy가 많아질수록 iptables 규칙 증가로 인한 관리 복잡성이 커질 수 있습니다.</li> <li>대규모 환경에서는 eBPF 기반 CNI(Cilium)를 고려해 성능 오버헤드를 줄이고, 정책 관리 효율성을 높일 수 있습니다.</li> <li>Ingress/Egress를 잘못 설정하면 내부 서비스 통신이 끊길 수 있으므로, 정책 점진적 적용(네임스페이스 단위 테스트 후 전체 배포)이 안전합니다.</li></ul> <h2 id="_8-마무리"><a href="#_8-마무리" class="header-anchor">#</a> 8. 마무리</h2> <p>NetworkPolicy는 Kubernetes 네트워크 보안의 핵심 도구로, Ingress와 Egress를 적절히 조합해 최소 권한(Least Privilege) 원칙을 구현할 수 있습니다.</p> <ul><li>Ingress는 외부에서 Pod로 들어오는 트래픽,</li> <li>Egress는 Pod에서 외부로 나가는 트래픽을 제어합니다.
CNI의 특성을 이해하고, 기본 차단 정책을 기반으로 필요한 트래픽만 허용하는 전략이 프로덕션 보안의 모범 사례입니다.</li></ul> <p>다음 단계:
Calico나 Cilium을 활용한 고급 NetworkPolicy 패턴 (GlobalNetworkPolicy, DNS 필터링, L7 레벨 제어)를 다음 글에서 다뤄보면 심화 시리즈로 이어갈 수 있습니다.</p> <p>원한다면, 이 내용을 “Ingress/Egress 고급 패턴” 섹션을 추가해 4500~5000자 수준의 더 풍부한 글로 확장해 드릴까요?</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/mlops/250725-gateway-httproute.html" class="prev">
        Gateway API와 HTTPRoute
      </a></span> <span class="next"><a href="/TIL/mlops/250727-quota-limits.html">
        LimitRange와 ResourceQuota
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.dba3423c.js" defer></script><script src="/TIL/assets/js/2.83a6f128.js" defer></script><script src="/TIL/assets/js/1.322c5a0a.js" defer></script><script src="/TIL/assets/js/40.c4adbd8b.js" defer></script>
  </body>
</html>
