<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kubernetes의 Probe 알아보기 | Today I Learned</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="desc">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.00bd70e4.css" as="style"><link rel="preload" href="/TIL/assets/js/app.dba3423c.js" as="script"><link rel="preload" href="/TIL/assets/js/2.83a6f128.js" as="script"><link rel="preload" href="/TIL/assets/js/1.322c5a0a.js" as="script"><link rel="preload" href="/TIL/assets/js/35.d500be46.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.d9e4b84a.js"><link rel="prefetch" href="/TIL/assets/js/11.ccf2f442.js"><link rel="prefetch" href="/TIL/assets/js/12.7e65a11a.js"><link rel="prefetch" href="/TIL/assets/js/13.d4317b93.js"><link rel="prefetch" href="/TIL/assets/js/14.ea01d868.js"><link rel="prefetch" href="/TIL/assets/js/15.9da1bcf8.js"><link rel="prefetch" href="/TIL/assets/js/16.8727279f.js"><link rel="prefetch" href="/TIL/assets/js/17.fa7fb6b0.js"><link rel="prefetch" href="/TIL/assets/js/18.56419c05.js"><link rel="prefetch" href="/TIL/assets/js/19.42d46c09.js"><link rel="prefetch" href="/TIL/assets/js/20.100d0125.js"><link rel="prefetch" href="/TIL/assets/js/21.428690a9.js"><link rel="prefetch" href="/TIL/assets/js/22.53eda83e.js"><link rel="prefetch" href="/TIL/assets/js/23.377a507c.js"><link rel="prefetch" href="/TIL/assets/js/24.62a43f53.js"><link rel="prefetch" href="/TIL/assets/js/25.2cb61fbc.js"><link rel="prefetch" href="/TIL/assets/js/26.07decc26.js"><link rel="prefetch" href="/TIL/assets/js/27.51b2d4dd.js"><link rel="prefetch" href="/TIL/assets/js/28.86b66102.js"><link rel="prefetch" href="/TIL/assets/js/29.f2c2a0c0.js"><link rel="prefetch" href="/TIL/assets/js/3.e6df855e.js"><link rel="prefetch" href="/TIL/assets/js/30.33147ece.js"><link rel="prefetch" href="/TIL/assets/js/31.4cd27359.js"><link rel="prefetch" href="/TIL/assets/js/32.a6842c91.js"><link rel="prefetch" href="/TIL/assets/js/33.431c1871.js"><link rel="prefetch" href="/TIL/assets/js/34.53302144.js"><link rel="prefetch" href="/TIL/assets/js/36.f4e6eb9f.js"><link rel="prefetch" href="/TIL/assets/js/37.eb0597c0.js"><link rel="prefetch" href="/TIL/assets/js/38.bcaf4fbf.js"><link rel="prefetch" href="/TIL/assets/js/39.c64a3043.js"><link rel="prefetch" href="/TIL/assets/js/4.cd02f05a.js"><link rel="prefetch" href="/TIL/assets/js/40.c4adbd8b.js"><link rel="prefetch" href="/TIL/assets/js/41.417973c2.js"><link rel="prefetch" href="/TIL/assets/js/42.c0d1a1f0.js"><link rel="prefetch" href="/TIL/assets/js/5.610977c8.js"><link rel="prefetch" href="/TIL/assets/js/6.b548e5bb.js"><link rel="prefetch" href="/TIL/assets/js/7.08600db3.js"><link rel="prefetch" href="/TIL/assets/js/vendors~docsearch.ef62c33d.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.00bd70e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jang-hs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/jang-hs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/TIL/" aria-current="page" class="sidebar-link">Monthly I Learned</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>algorithm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>data-engineer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>design-pattern</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>mlops</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/mlops/241109-mlops-data-testing.html" class="sidebar-link">MLOps 01: Data testing, why, what and how</a></li><li><a href="/TIL/mlops/241110-mlops-dagstar.html" class="sidebar-link">MLOps 02: Dagster — Seamless Data Pipelines &amp; ML Model Management for Machine Learning Engineers</a></li><li><a href="/TIL/mlops/241111-mlops-featurestore.html" class="sidebar-link">MLOps 03: Feast Feature Store — An In-depth Overview Experimentation and Application in Tabular data</a></li><li><a href="/TIL/mlops/241120-devops-metric-monitoring-alert.html" class="sidebar-link">Metrics Monitoring and Alerting system</a></li><li><a href="/TIL/mlops/241124-docker-multistage.html" class="sidebar-link">도커 멀티스테이징</a></li><li><a href="/TIL/mlops/241125-devops-k8s-probe.html" aria-current="page" class="active sidebar-link">Kubernetes의 Probe 알아보기</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/mlops/241125-devops-k8s-probe.html#liveness-probe" class="sidebar-link">Liveness Probe</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/241125-devops-k8s-probe.html#readiness-probe" class="sidebar-link">Readiness Probe</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/241125-devops-k8s-probe.html#startup-probe" class="sidebar-link">Startup Probe</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/241125-devops-k8s-probe.html#프로브의-설정-구성" class="sidebar-link">프로브의 설정 구성</a></li><li class="sidebar-sub-header"><a href="/TIL/mlops/241125-devops-k8s-probe.html#프로브-활용-시-주의점" class="sidebar-link">프로브 활용 시 주의점</a></li></ul></li><li><a href="/TIL/mlops/241127-devops-k8s-hpa.html" class="sidebar-link">Kubernetes HPA (Horizontal Pod Autoscaler) 알아보기</a></li><li><a href="/TIL/mlops/250414-k8s-hard-way-01.html" class="sidebar-link">[k8s hard way] 01-prerequisites 실습</a></li><li><a href="/TIL/mlops/250415-k8s-hard-way-02.html" class="sidebar-link">[k8s hard way] 02-Jumpbox 설정</a></li><li><a href="/TIL/mlops/250725-gateway-httproute.html" class="sidebar-link">Gateway API와 HTTPRoute</a></li><li><a href="/TIL/mlops/250727-network-policy.html" class="sidebar-link">Kubernetes NetworkPolicy</a></li><li><a href="/TIL/mlops/250727-quota-limits.html" class="sidebar-link">LimitRange와 ResourceQuota</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>sql</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="kubernetes의-probe-알아보기"><a href="#kubernetes의-probe-알아보기" class="header-anchor">#</a> Kubernetes의 Probe 알아보기</h1> <p>쿠버네티스(Kubernetes)에서 프로브(Probe)는 애플리케이션 컨테이너의 상태를 점검하는 메커니즘입니다. 프로브는 주로 헬스 체크에 사용되며, 이를 통해 쿠버네티스가 애플리케이션의 상태를 모니터링하고 적절한 조치를 취할 수 있습니다. 쿠버네티스에서 지원하는 주요 프로브는 다음과 같습니다:</p> <ul><li>Liveness Probe: 생존 여부를 확인하며, 실패 시 컨테이너 재시작.</li> <li>Readiness Probe: 준비 상태를 확인하며, 실패 시 트래픽 차단.</li> <li>Startup Probe: 시작 완료 여부를 확인하며, Liveness/Readiness Probe의 실행을 지연.</li></ul> <h2 id="liveness-probe"><a href="#liveness-probe" class="header-anchor">#</a> Liveness Probe</h2> <p><strong>역할:</strong> 컨테이너가 정상적으로 작동 중인지 확인.</p> <ul><li>실패하면 컨테이너를 재시작.</li> <li>주로 <strong>애플리케이션이 고장난 상태에서 복구 불가능할 경우</strong>를 감지하기 위해 사용.</li> <li>예: 애플리케이션이 데드락 상태에 빠졌거나, 응답하지 않는 상태.</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span>
  <span class="token key atrule">httpGet</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /healthz
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
</code></pre></div><h2 id="readiness-probe"><a href="#readiness-probe" class="header-anchor">#</a> Readiness Probe</h2> <p><strong>역할:</strong> 컨테이너가 요청을 처리할 준비가 되었는지 확인.</p> <ul><li>실패하면 해당 컨테이너로 트래픽을 전달하지 않음.</li> <li>주로 애플리케이션 초기화나 의존 서비스가 준비될 때까지 대기하기 위해 사용.</li> <li>Liveness와 달리 컨테이너를 재시작하지는 않음.</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">readinessProbe</span><span class="token punctuation">:</span>
  <span class="token key atrule">tcpSocket</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3306</span>
  <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
  <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
</code></pre></div><h2 id="startup-probe"><a href="#startup-probe" class="header-anchor">#</a> Startup Probe</h2> <p><strong>역할:</strong> 애플리케이션이 완전히 시작되었는지 확인.</p> <ul><li>Readiness와 Liveness의 역할을 대체하지 않지만, <strong>시작이 느린 애플리케이션을 처리</strong>하는 데 유용.</li> <li>Startup Probe가 성공하기 전에는 Liveness와 Readiness가 실행되지 않음.</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">startupProbe</span><span class="token punctuation">:</span>
  <span class="token key atrule">exec</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> cat
    <span class="token punctuation">-</span> /tmp/ready
  <span class="token key atrule">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
  <span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token number">30</span>
</code></pre></div><h2 id="프로브의-설정-구성"><a href="#프로브의-설정-구성" class="header-anchor">#</a> 프로브의 설정 구성</h2> <ol><li><strong>동작 유형</strong> <ul><li><code>httpGet</code>: HTTP 요청을 보내 상태 확인.</li> <li><code>tcpSocket</code>: 특정 포트에서 TCP 연결 가능 여부 확인.</li> <li><code>exec</code>: 컨테이너 내에서 특정 명령어를 실행하고 종료 코드를 확인.</li></ul></li> <li><strong>주요 파라미터</strong> <ul><li><code>initialDelaySeconds</code>: 프로브 시작 전 대기 시간.</li> <li><code>periodSeconds</code>: 프로브 주기.</li> <li><code>timeoutSeconds</code>: 프로브 응답 타임아웃.</li> <li><code>failureThreshold</code>: 실패를 몇 번 연속으로 감지하면 상태를 &quot;비정상&quot;으로 판단할지 설정.</li> <li><code>successThreshold</code>: 몇 번 연속 성공하면 상태를 &quot;정상&quot;으로 판단할지 설정 (주로 Readiness Probe에 사용).</li></ul></li></ol> <h2 id="프로브-활용-시-주의점"><a href="#프로브-활용-시-주의점" class="header-anchor">#</a> 프로브 활용 시 주의점</h2> <ul><li>Startup Probe는 느린 초기화를 처리할 때만 필요하며, 설정하지 않으면 Liveness Probe가 초기화 과정에서 불필요하게 재시작을 유발할 수 있습니다.</li> <li>Readiness Probe는 애플리케이션 초기화뿐만 아니라 외부 의존성(예: 데이터베이스 연결 상태)을 확인하는 데도 적합합니다.</li> <li>Liveness Probe는 애플리케이션의 고장 상태를 신속히 감지하고 복구하는 데 중요한 역할을 합니다.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/mlops/241124-docker-multistage.html" class="prev">
        도커 멀티스테이징
      </a></span> <span class="next"><a href="/TIL/mlops/241127-devops-k8s-hpa.html">
        Kubernetes HPA (Horizontal Pod Autoscaler) 알아보기
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.dba3423c.js" defer></script><script src="/TIL/assets/js/2.83a6f128.js" defer></script><script src="/TIL/assets/js/1.322c5a0a.js" defer></script><script src="/TIL/assets/js/35.d500be46.js" defer></script>
  </body>
</html>
